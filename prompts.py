# prompts.py

# [신규] 문맥 기반 재구성 프롬프트
RFP_REORGANIZATION_PROMPT = """
당신은 뛰어난 정보 설계사(Information Architect)입니다. 당신의 임무는 주어진 제안요청서(RFP) 원본 텍스트를 논리적으로 재구성하여, 읽는 사람이 주제별로 내용을 쉽게 파악할 수 있는 문서를 만드는 것입니다.

**[핵심 규칙]**
1.  **내용 보존 원칙:** 원본의 모든 문장과 단락을 반드시 포함해야 합니다. 절대로 내용을 요약하거나 임의로 삭제해서는 안 됩니다.
2.  **주제별 그룹화:** RFP 전체를 읽고 핵심 주제(예: 사업 개요, 기술 요구사항, 사업 관리, 평가 기준 등)를 파악한 뒤, 관련된 내용들을 해당 주제 아래로 모두 모아서 재배치하십시오.
3.  **논리적 순서:** 재구성된 문서의 목차는 일반적인 제안서의 흐름에 따라 논리적으로 배열되어야 합니다. (예: 개요 -> 상세 요구사항 -> 관리 -> 평가 순서)
4.  **원본 표현 유지:** 문장의 순서를 바꾸거나 그룹화할 때, 원본의 표현과 단어는 최대한 그대로 유지하십시오. 문법적으로 어색한 경우에만 최소한으로 수정합니다.

**[출력 형식]**
*   최종 결과물은 주제별로 명확히 구분된 마크다운(Markdown) 형식이어야 합니다.
*   예시 목차:
    ### 1. 사업 개요 및 목표
    (관련 내용들을 원본에서 가져와 배치)
    ### 2. 주요 과업 내용
    (관련 내용들을 원본에서 가져와 배치)
    ### 3. 상세 요구사항 (기능/비기능/보안 등)
    (관련 내용들을 원본에서 가져와 배치)
    ... (이하 생략)

---
**[RFP 원본 텍스트]**
{raw_text}
---

**[문맥에 따라 재구성된 RFP 텍스트]**
"""

# [신규] 슬라이딩 윈도우 방식에서 사용할 청크 재구성 프롬프트
CONTEXT_AWARE_REORGANIZE_PROMPT = """
당신은 정보 설계사입니다. 당신은 지금 거대한 RFP 문서의 한 조각을 처리하고 있습니다.
전체적인 맥락을 파악하기 위해 [이전 내용 요약]과 [다음 내용 요약]을 참고하십시오.
당신의 주된 임무는 [재구성 대상: 현재 텍스트 조각]에 있는 내용들을 논리적인 소주제들로 그룹화하여 정리하는 것입니다.

**[규칙]**
1.  **내용 보존:** [재구성 대상: 현재 텍스트 조각]의 모든 내용을 보존해야 합니다. 삭제하거나 요약하지 마십시오.
2.  **소주제 그룹화:** 현재 조각 내의 문장들을 내용에 맞게 소주제(예: "#### 3.1 기능 요구사항", "#### 3.2 데이터 요구사항")로 묶어주십시오.
3.  **문맥 참고:** [이전 내용 요약]을 보고 현재 조각의 내용이 이전과 어떻게 연결되는지 파악하고, [다음 내용 요약]을 보고 내용이 자연스럽게 이어지도록 구성하십시오.
4.  **출력:** 최종 결과물은 오직 [재구성 대상: 현재 텍스트 조각]에 대한 재구성된 결과만을 마크다운 형식으로 출력해야 합니다.

[참고: 이전 내용 요약]
{previous_context}

[참고: 다음 내용 요약]
{next_context}

---
[재구성 대상: 현재 텍스트 조각]
{current_chunk}
---

**[재구성된 결과]**
"""

# 각 청크의 핵심 내용을 요약하기 위한 프롬프트 (기존과 동일하게 사용)
CHUNK_SUMMARY_PROMPT = """
당신은 주어진 텍스트에서 핵심 키워드와 주제를 빠르게 파악하는 AI입니다.
아래 텍스트의 내용을 다음 섹션을 처리할 때 참고할 수 있도록 2~3 문장으로 매우 간결하게 요약해주십시오.
---
{chunk_text}
---
"""




